!function(){window.App=Ember.Application.create({LOG_TRANSITIONS:!0})}(),function(){App.ApplicationController=Ember.ObjectController.extend({})}(),function(){App.ArtistsController=Ember.ObjectController.extend({})}(),function(){App.ArtistsIndexController=Ember.ArrayController.extend({needs:["artists"],artists:function(){return this.get("controllers.artists.model.artists")}.property("controllers.artists"),actions:{deleteArtist:function(a){a.deleteRecord(),a.save()}}})}(),function(){App.ArtistsNewController=Ember.ObjectController.extend({needs:["artists","artistsIndex"],practices:Ember.A(),content:Ember.Object.create(),practicesNames:function(){return this.get("controllers.artists.model.practices").map(function(a){return a.get("name")})}.property("controllers.artists.model.practices"),addPractice:function(a){var b=this.get("practices");if(b.findBy("name",a))return!0;var c=this.get("controllers.artists.model.practices").findBy("name",a);c||(c=this.store.createRecord("practice",{name:a})),b.pushObject(c)},actions:{submit:function(){var a=this,b=this.store.createRecord("artist",{first_name:this.get("first_name"),last_name:this.get("last_name")}),c=[];this.get("practices").forEach(function(a){b.get("practices").pushObject(a),a.get("isNew")&&c.push(a.save())});var d=new Ember.RSVP.Promise(function(a){c.length?Ember.RSVP.all(c).then(function(){b.save().then(function(){a()})}):b.save().then(function(){a()})});d.then(function(){a.transitionToRoute("artists"),a.setProperties({first_name:"",last_name:"",practices:Ember.A()})},function(){})}}})}(),function(){App.IndexController=Ember.ArrayController.extend({})}(),function(){App.Store=DS.Store.extend({}),App.ArtistSerializer=DS.RESTSerializer.extend({serialize:function(a){var b={first_name:a.get("first_name"),last_name:a.get("last_name"),practices:a.get("practices").map(function(a){return a.id})};return b}})}(),function(){App.Practice=DS.Model.extend({name:DS.attr("string")}),App.Artist=DS.Model.extend({first_name:DS.attr("string"),last_name:DS.attr("string"),practices:DS.hasMany("practice")})}(),function(){App.ArtistsIndexRoute=Ember.Route.extend({})}(),function(){App.ArtistsNewRoute=Ember.Route.extend({})}(),function(){App.ArtistsRoute=Ember.Route.extend({model:function(){var a=[this.store.find("artist"),this.store.find("practice")],b=new Ember.RSVP.Promise(function(b){Ember.RSVP.all(a).then(function(a){b({artists:a[0],practices:a[1]})},function(){})});return b},renderTemplate:function(){this.render({outlet:"artists"})}})}(),function(){App.IndexRoute=Ember.Route.extend({redirect:function(){this.transitionTo("artists")}})}(),function(){App.ArtistsNewView=Ember.View.extend({didInsertElement:function(){var a=this.controller;this.$("#typeAhead").typeahead({source:function(){return a.get("practicesNames")},updater:function(b){a.addPractice(b)}}),this.$("#typeAhead").keypress(function(b){if(13==b.which){var c=b.target.value;a.addPractice(c),b.target.value="",b.preventDefault()}})}})}(),function(){App.Router.map(function(){this.resource("artists",function(){this.route("new")})})}();